{"ast":null,"code":"import * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nvar ESC = KeyCode.ESC,\n    TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n      setTriggerVisible = _ref.setTriggerVisible,\n      triggerRef = _ref.triggerRef,\n      menuRef = _ref.menuRef,\n      onVisibleChange = _ref.onVisibleChange;\n  var focusMenuRef = React.useRef(false);\n\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible && triggerRef.current) {\n      var _triggerRef$current, _triggerRef$current$t, _triggerRef$current$t2, _triggerRef$current$t3;\n\n      (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$t = _triggerRef$current.triggerRef) === null || _triggerRef$current$t === void 0 ? void 0 : (_triggerRef$current$t2 = _triggerRef$current$t.current) === null || _triggerRef$current$t2 === void 0 ? void 0 : (_triggerRef$current$t3 = _triggerRef$current$t2.focus) === null || _triggerRef$current$t3 === void 0 ? void 0 : _triggerRef$current$t3.call(_triggerRef$current$t2);\n      setTriggerVisible(false);\n\n      if (typeof onVisibleChange === 'function') {\n        onVisibleChange(false);\n      }\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    var _menuRef$current;\n\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n\n      case TAB:\n        if (!focusMenuRef.current && ((_menuRef$current = menuRef.current) === null || _menuRef$current === void 0 ? void 0 : _menuRef$current.focus)) {\n          event.preventDefault();\n          menuRef.current.focus();\n          focusMenuRef.current = true;\n        } else {\n          handleCloseMenuAndReturnFocus();\n        }\n\n        break;\n    }\n  };\n\n  React.useEffect(function () {\n    if (visible) {\n      window.addEventListener('keydown', handleKeyDown);\n      return function () {\n        window.removeEventListener('keydown', handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n\n    return function () {\n      return null;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}","map":{"version":3,"names":["React","KeyCode","ESC","TAB","useAccessibility","_ref","visible","setTriggerVisible","triggerRef","menuRef","onVisibleChange","focusMenuRef","useRef","handleCloseMenuAndReturnFocus","current","_triggerRef$current","_triggerRef$current$t","_triggerRef$current$t2","_triggerRef$current$t3","focus","call","handleKeyDown","event","_menuRef$current","keyCode","preventDefault","useEffect","window","addEventListener","removeEventListener"],"sources":["/Users/obzva/Desktop/find-clean-water/node_modules/rc-dropdown/es/hooks/useAccessibility.js"],"sourcesContent":["import * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nvar ESC = KeyCode.ESC,\n    TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n      setTriggerVisible = _ref.setTriggerVisible,\n      triggerRef = _ref.triggerRef,\n      menuRef = _ref.menuRef,\n      onVisibleChange = _ref.onVisibleChange;\n  var focusMenuRef = React.useRef(false);\n\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible && triggerRef.current) {\n      var _triggerRef$current, _triggerRef$current$t, _triggerRef$current$t2, _triggerRef$current$t3;\n\n      (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$t = _triggerRef$current.triggerRef) === null || _triggerRef$current$t === void 0 ? void 0 : (_triggerRef$current$t2 = _triggerRef$current$t.current) === null || _triggerRef$current$t2 === void 0 ? void 0 : (_triggerRef$current$t3 = _triggerRef$current$t2.focus) === null || _triggerRef$current$t3 === void 0 ? void 0 : _triggerRef$current$t3.call(_triggerRef$current$t2);\n      setTriggerVisible(false);\n\n      if (typeof onVisibleChange === 'function') {\n        onVisibleChange(false);\n      }\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    var _menuRef$current;\n\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n\n      case TAB:\n        if (!focusMenuRef.current && ((_menuRef$current = menuRef.current) === null || _menuRef$current === void 0 ? void 0 : _menuRef$current.focus)) {\n          event.preventDefault();\n          menuRef.current.focus();\n          focusMenuRef.current = true;\n        } else {\n          handleCloseMenuAndReturnFocus();\n        }\n\n        break;\n    }\n  };\n\n  React.useEffect(function () {\n    if (visible) {\n      window.addEventListener('keydown', handleKeyDown);\n      return function () {\n        window.removeEventListener('keydown', handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n\n    return function () {\n      return null;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,IAAIC,GAAG,GAAGD,OAAO,CAACC,GAAlB;AAAA,IACIC,GAAG,GAAGF,OAAO,CAACE,GADlB;AAEA,eAAe,SAASC,gBAAT,CAA0BC,IAA1B,EAAgC;EAC7C,IAAIC,OAAO,GAAGD,IAAI,CAACC,OAAnB;EAAA,IACIC,iBAAiB,GAAGF,IAAI,CAACE,iBAD7B;EAAA,IAEIC,UAAU,GAAGH,IAAI,CAACG,UAFtB;EAAA,IAGIC,OAAO,GAAGJ,IAAI,CAACI,OAHnB;EAAA,IAIIC,eAAe,GAAGL,IAAI,CAACK,eAJ3B;EAKA,IAAIC,YAAY,GAAGX,KAAK,CAACY,MAAN,CAAa,KAAb,CAAnB;;EAEA,IAAIC,6BAA6B,GAAG,SAASA,6BAAT,GAAyC;IAC3E,IAAIP,OAAO,IAAIE,UAAU,CAACM,OAA1B,EAAmC;MACjC,IAAIC,mBAAJ,EAAyBC,qBAAzB,EAAgDC,sBAAhD,EAAwEC,sBAAxE;;MAEA,CAACH,mBAAmB,GAAGP,UAAU,CAACM,OAAlC,MAA+C,IAA/C,IAAuDC,mBAAmB,KAAK,KAAK,CAApF,GAAwF,KAAK,CAA7F,GAAiG,CAACC,qBAAqB,GAAGD,mBAAmB,CAACP,UAA7C,MAA6D,IAA7D,IAAqEQ,qBAAqB,KAAK,KAAK,CAApG,GAAwG,KAAK,CAA7G,GAAiH,CAACC,sBAAsB,GAAGD,qBAAqB,CAACF,OAAhD,MAA6D,IAA7D,IAAqEG,sBAAsB,KAAK,KAAK,CAArG,GAAyG,KAAK,CAA9G,GAAkH,CAACC,sBAAsB,GAAGD,sBAAsB,CAACE,KAAjD,MAA4D,IAA5D,IAAoED,sBAAsB,KAAK,KAAK,CAApG,GAAwG,KAAK,CAA7G,GAAiHA,sBAAsB,CAACE,IAAvB,CAA4BH,sBAA5B,CAArb;MACAV,iBAAiB,CAAC,KAAD,CAAjB;;MAEA,IAAI,OAAOG,eAAP,KAA2B,UAA/B,EAA2C;QACzCA,eAAe,CAAC,KAAD,CAAf;MACD;IACF;EACF,CAXD;;EAaA,IAAIW,aAAa,GAAG,SAASA,aAAT,CAAuBC,KAAvB,EAA8B;IAChD,IAAIC,gBAAJ;;IAEA,QAAQD,KAAK,CAACE,OAAd;MACE,KAAKtB,GAAL;QACEW,6BAA6B;QAC7B;;MAEF,KAAKV,GAAL;QACE,IAAI,CAACQ,YAAY,CAACG,OAAd,KAA0B,CAACS,gBAAgB,GAAGd,OAAO,CAACK,OAA5B,MAAyC,IAAzC,IAAiDS,gBAAgB,KAAK,KAAK,CAA3E,GAA+E,KAAK,CAApF,GAAwFA,gBAAgB,CAACJ,KAAnI,CAAJ,EAA+I;UAC7IG,KAAK,CAACG,cAAN;UACAhB,OAAO,CAACK,OAAR,CAAgBK,KAAhB;UACAR,YAAY,CAACG,OAAb,GAAuB,IAAvB;QACD,CAJD,MAIO;UACLD,6BAA6B;QAC9B;;QAED;IAdJ;EAgBD,CAnBD;;EAqBAb,KAAK,CAAC0B,SAAN,CAAgB,YAAY;IAC1B,IAAIpB,OAAJ,EAAa;MACXqB,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCP,aAAnC;MACA,OAAO,YAAY;QACjBM,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCR,aAAtC;QACAV,YAAY,CAACG,OAAb,GAAuB,KAAvB;MACD,CAHD;IAID;;IAED,OAAO,YAAY;MACjB,OAAO,IAAP;IACD,CAFD;EAGD,CAZD,EAYG,CAACR,OAAD,CAZH,EA1C6C,CAsD9B;AAChB"},"metadata":{},"sourceType":"module"}